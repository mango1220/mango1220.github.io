<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Mango's blog">
<meta property="og:url" content="http://mango1220.github.io/index.html">
<meta property="og:site_name" content="Mango's blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mango's blog">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>



  <title> Mango's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Mango's blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/22/Process/" itemprop="url">
                《操作系统》实验1：进程状态迁移过程
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-01-22T21:46:20+08:00" content="2016-01-22">
            2016-01-22
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2016/01/22/Process/#comments" itemprop="discussionUrl">
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/01/22/Process/" itemprop="commentsCount"></span>
            </a>
          </span>
          
        
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="要求">要求</h2><p>写一个程序描述进程状态迁移过程：</p>
<ol>
<li>提供导致进程状态变化的调用接口，包括创建、删除、删除、调度、阻塞、时间到、挂起、激活等。</li>
<li>实现进程列表显示的接口。<br>注：这里设计的进程是一个假设的对象实体，是由程序自己创建和删除，不是系统维护的进程。</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/12/04/Question/" itemprop="url">
                一些问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-12-04T19:21:03+08:00" content="2015-12-04">
            2015-12-04
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/12/04/Question/#comments" itemprop="discussionUrl">
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/12/04/Question/" itemprop="commentsCount"></span>
            </a>
          </span>
          
        
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><ol>
<li><p>如何理解</p>
<blockquote>
<p>flush the buffer: “Output buffers can be explicitly flushed to force the buffer to be written. By default, reading <code>cin</code> flushes <code>cout</code>; <code>cout</code> is also flushed when the program ends normally.”<br> <a href="http://stackoverflow.com/questions/15042849/what-does-flushing-the-buffer-mean" target="_blank" rel="external">http://stackoverflow.com/questions/15042849/what-does-flushing-the-buffer-mean</a></p>
</blockquote>
<p> 答：</p>
<blockquote>
<p>Consider writing to a file. This is an expensive operation. If in your code you write one byte at a time, then each write of a byte is going to be very costly. So a common way to improve performance is to store the data that you are writing in a temporary buffer. Only when there is a lot of data is the buffer written to the file. By postponing the writes, and writing a large block in one go, performance is improved.</p>
</blockquote>
<p> 所以，”flush the buffer”指将buffer中的所有数据输出到某一处（如存储到文件），然后清空buffer。</p>
</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/12/01/AccelerateCPP/" itemprop="url">
                Accelerate C++ 习题解答
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-12-01T21:21:25+08:00" content="2015-12-01">
            2015-12-01
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/12/01/AccelerateCPP/#comments" itemprop="discussionUrl">
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/12/01/AccelerateCPP/" itemprop="commentsCount"></span>
            </a>
          </span>
          
        
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h1 id="Chapter_0">Chapter 0</h1><ul>
<li>0-0 Compile and run the Hello, World! program.<br>  略</li>
<li><p>0-1 What does the following statement do?</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> + <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p>  解：</p>
</li>
<li><p>0-2 Write a program that, when run, writes</p>
  <figure class="highlight mizar"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This (") <span class="keyword">is</span> a quote, <span class="keyword">and</span> this (\) <span class="keyword">is</span> a backslash.</span><br></pre></td></tr></table></figure>
<p>  解：</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This (\") is a quote, and this (\\) is a backslash."</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>0-3 The string literal “\t” represents a tab character; different C++ implementations display tabs in different ways. Experiment with your implementation to learn how it treats tabs.<br>  略</p>
</li>
<li><p>0-4 Write a program that, when run, writes the Hello World program as its output.<br>  解：</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"#include &lt;iostream&gt;"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"int main()"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"&#123;"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\tstd::cout &lt;&lt; \"This (\\\") is a quote, and this (\\\\) is a backslash.\" &lt;&lt; std::endl;"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\treturn 0;"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"&#125;"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>0-5 Is this a valid program? Why or why not?</p>
  <figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="built_in">int</span> main()     std::cout &lt;&lt; <span class="string">"Hello World!"</span> &lt;&lt; std::endl<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>  解：编译该段程序，编译器报错”error: expected initializer before ‘std’”;</p>
<p>  int main(){XXX;} 定义main函数，必须包含{}来说明该函数的函数体是什么，函数体可以为空，如</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  表示返回值为整型的main函数，其函数体表示返回0。</p>
</li>
<li><p>0-6 Is this a valid program? Why or why not?</p>
  <figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;iostream&gt;</span></span><br><span class="line">int main() <span class="expansion">&#123;&#123;&#123;&#123;&#123;&#123;<span class="symbol">std:</span><span class="symbol">:cout</span> &lt;&lt; <span class="string">"Hello World!"</span> &lt;&lt; <span class="symbol">std:</span><span class="symbol">:endl</span>;&#125;&#125;</span>&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>  解：正确，一对{}代表一个单元，该段代码中的{}多层嵌套。</p>
</li>
<li><p>0-7 Is this a valid program? why or why not?</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> main&#123;&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* This is a comment that extends over several lines</span><br><span class="line">    because it uses <span class="comment">/* and */</span> as its starting and ending delimiters */</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Does this work?"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  解：错误，<code>/* */</code><br>  不能嵌套使用，此处实际上只注释了</p>
  <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* This <span class="keyword">is</span> a comment <span class="keyword">that</span> extends <span class="keyword">over</span> several lines</span><br><span class="line">because <span class="keyword">it</span> uses /* <span class="keyword">and</span> */</span><br></pre></td></tr></table></figure>
<p>  编译器会从第一个<code>/*</code><br>  到第一个<code>*/</code><br>  匹配为一段注释。</p>
</li>
<li><p>0-8 Is this a valid program? why or why not?</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> main&#123;&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// This is a comment that extends over several lines</span></span><br><span class="line">    <span class="comment">// by using // at the beginning of each line instead of using /*</span></span><br><span class="line">    <span class="comment">// or */ / to delimit comments.</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Does this work?"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  解：正确，//后面无论是什么都作为注释处理。</p>
</li>
<li><p>0-9 What is the shortest valid program?<br>  解：</p>
  <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>0-10 Rewrite the Hello World program so that a newline occurs everywhere that white-space is allowed in the program.<br>  解：</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello,\nWorld!"</span> &lt;&lt; <span class="built_in">std</span>::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Chapter_1">Chapter 1</h1><ul>
<li>1-0 Compile, execute, and test the programs in this chapter.<br>  略</li>
<li><p>1-1 Are the following definitions valid? Why or why not?</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> hello = <span class="string">"Hello"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> message = hello + <span class="string">", world"</span> + <span class="string">"!"</span>;</span><br></pre></td></tr></table></figure>
<p>  解：正确</p>
</li>
<li><p>1-2 Are the following definitions valid? Why or why not?</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> exclam = <span class="string">"!"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> message = <span class="string">"Hello "</span> + <span class="string">", world"</span> + exclam;</span><br></pre></td></tr></table></figure>
<p>  解：</p>
</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/24/LeetCodeArray/" itemprop="url">
                LeetCode刷题记录——Algorithm的Array部分
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-10-24T20:01:38+08:00" content="2015-10-24">
            2015-10-24
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/10/24/LeetCodeArray/#comments" itemprop="discussionUrl">
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/24/LeetCodeArray/" itemprop="commentsCount"></span>
            </a>
          </span>
          
        
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="1-_[217]Contain_Duplicate">1. [217]Contain Duplicate</h2><p>Given an array of integers, find if the array contains any duplicates. Your function should return true if any value appears at least twice in the array, and it should return false if every element is distinct.<br>给定一个整数数组，判断该数组是否有重复的数字。如果有数字出现了至少两次，那么你的函数应当返回true，如果每个数字都是不同的（唯一的），那么函数应当返回false。</p>
<h3 id="方法1">方法1</h3><p>利用STL中的set容器，因为set容器是单纯的key的集合，而且每个key都是唯一的，所以将题设数组存入set容器中，只会保留不同的元素。比较set的size和vector的size，若set较小说明有重复的元素被归为一个了，所以返回true，否则，set的size等于vector的size，返回false。<br>set是使用红黑树实现数据存储的。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">containsDuplicate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; setInt(nums.begin(), nums.end());</span><br><span class="line">    <span class="keyword">if</span> (setInt.size() &lt; nums.size())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br>16 / 16 test cases passed.<br>Status: Accepted<br>Runtime: 52 ms<br>Your runtime beats 37.29% of cpp submissions.</p>
<p>对比构造函数法和插入法<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class <span class="type">Solution</span> &#123;</span><br><span class="line">public:</span><br><span class="line">    <span class="type">bool</span> containsDuplicate(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">    <span class="type">set</span>&lt;<span class="type">int</span>&gt; setInt;</span><br><span class="line">    <span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::<span class="keyword">iterator</span> iterV = nums.begin(); iterV != nums.<span class="keyword">end</span>(); ++iterV)</span><br><span class="line">    &#123;</span><br><span class="line">        setInt.insert(*iterV);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (setInt.size() &lt; nums.size())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br>16 / 16 test cases passed.<br>Status: Accepted<br>Runtime: 92 ms<br>You are here!<br>Your runtime beats 26.27% of cpp submissions.<br>考虑到构造函数法使用的是stl_tree.h中的insert_unique(开销比循环调用insert方法小?)。</p>
<h3 id="方法2">方法2</h3><p>对给定的数组排序，然后比较相邻两个数，若存在相邻两数相等，即含有重复的数，返回true，否则返回false。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">containsDuplicate</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::sort(nums.begin(), nums.end());</span><br><span class="line">    <span class="keyword">if</span> (nums.size() &lt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size()-<span class="number">1</span> ; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] == nums[i+<span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br>16 / 16 test cases passed.<br>Status: Accepted<br>Runtime: 36 ms<br>You are here!<br>Your runtime beats 92.22% of cpp submissions.<br>方法2比方法1快的原因是：方法1中的<code>nums.size() &gt; setInt.size()</code>，在C++11之前的STL中<code>.size()</code>方法的时间复杂度是O(n)，而使用方法2，先排序（使用<code>.sort()</code>方法，时间复杂度O(nlogn)），再遍历数组，若发现有相邻两数相等即返回true，该for循环最坏的时间复杂度为O(n)。</p>
<h2 id="2-_[66]Plus_One">2. [66]Plus One</h2><p>Given a non-negative number represented as an array of digits, plus one to the number.<br>The digits are stored such that the most significant digit is at the head of the list.<br>将一组数字存入数组来代表一个非负数，对该数加1。<br>最高位的数字存在数组的第一个位置。</p>
<h3 id="方法">方法</h3><p>检查从最低位开始，连续多少位是9，即检查出，从第几位开始不是9，在该位加1，之前为9的位数全部置0，若该位为最高位，则使用insert方法，添加一位，即新的最高位为1，其他位置0.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; plusOne(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; digits) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = digits.size()-<span class="number">1</span>; i &gt;= <span class="number">0</span> ; --i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (digits[i] == <span class="number">9</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                digits[i] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                digits[i] = digits[i] + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                digits.insert(digits.begin(),<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> digits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br>108 / 108 test cases passed.<br>Status: Accepted<br>Runtime: 4 ms<br>You are here!<br>Your runtime beats 5.79% of cpp submissions.<br>改进：</p>
<h2 id="3-_[189]Rotate_Array">3. [189]Rotate Array</h2><p>Rotate an array of n elements to the right by k steps.<br>For example, with n = 7 and k = 3, the array [1,2,3,4,5,6,7] is rotated to [5,6,7,1,2,3,4].<br>Note:<br>Try to come up as many solutions as you can, there are at least 3 different ways to solve this problem.<br>对一含有n个元素的数组向右翻转7步。<br>举例，n = 7， k = 3， 数组为[1,2,3,4,5,6,7]被翻转为[5,6,7,1,2,3,4]。<br>备注：<br>尽可能使用更多的方法，该问题至少有3种不同的解决方法。</p>
<h3 id="方法1-1">方法1</h3><p>将后k位的数组平移至数组头部，如例子中的5,6,7平移到1之前，5,6,7的顺序不变。涉及到数组的插入和删除。<br><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class <span class="type">Solution</span> &#123;</span><br><span class="line">public:</span><br><span class="line">    void rotate(<span class="built_in">vector</span>&lt;<span class="built_in">int</span>&gt;&amp; nums, <span class="built_in">int</span> k) &#123;</span><br><span class="line">        k = k % nums.size<span class="literal">()</span>;</span><br><span class="line">        nums.insert(nums.begin<span class="literal">()</span>, nums.<span class="keyword">end</span><span class="literal">()</span> - k, nums.<span class="keyword">end</span><span class="literal">()</span>);</span><br><span class="line">        nums.erase(nums.<span class="keyword">end</span><span class="literal">()</span> - k, nums.<span class="keyword">end</span><span class="literal">()</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br>33 / 33 test cases passed.<br>Status: Accepted<br>Runtime: 24 ms<br>You are here!<br>Your runtime beats 21.37% of cpp submissions.</p>
<h3 id="方法2-1">方法2</h3><h2 id="4-_[27]Remove_Element">4. [27]Remove Element</h2><p>Given an array and a value, remove all instances of that value in place and return the new length.<br>The order of elements can be changed. It doesn’t matter what you leave beyond the new length.<br>给定一个数组和一个值，删除该值在数组中的所有实例，返回新的长度，数组中元素的顺序可以被改变，可以不用管</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/17/KMeans/" itemprop="url">
                K均值算法C++实现
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-10-17T17:36:21+08:00" content="2015-10-17">
            2015-10-17
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/10/17/KMeans/#comments" itemprop="discussionUrl">
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/17/KMeans/" itemprop="commentsCount"></span>
            </a>
          </span>
          
        
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="题目">题目</h2><p>试用K-均值法对如下模式分布进行聚类分析。编程实现，编程语言不限。<br>{x1(0,0), x2(3,8), x3(2,2), x4(1,1), x5(5,3), x6(6,3), x8(5,4), x9(6,4), x10(7,5)}</p>
<p>答：<br>K-均值法算法流程：</p>
<ol>
<li>设置聚类中心的个数K，选择前K个点作为初始中心</li>
<li>计算每个点到K个聚类中心的距离，根据最短距离将该点分配到对应的聚类中心</li>
<li>以该组均值为中心，得出每个聚类组的新中心</li>
<li>如果新中心和上一次的中心不一样，返回步骤2进行迭代运算直至新中心不再变化，算法结束</li>
</ol>
<h2 id="C++实现">C++实现</h2><p>使用CLion建立的工程，含CMakeLists.txt、main.cpp、K_Means.h、K_Means.cpp<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*****************</span><br><span class="line">main.cpp</span><br><span class="line">*****************/</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">"K_Means.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//read the data</span></span><br><span class="line">    <span class="keyword">char</span> filename[<span class="number">128</span>];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"data file name:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; filename;</span><br><span class="line">    ifstream dataFile;</span><br><span class="line">    dataFile.open(filename, ios::in);</span><br><span class="line">    <span class="keyword">if</span> (!dataFile) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Error, cannot read the file"</span> &lt;&lt; filename &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//input data</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;Point&gt; Set;</span><br><span class="line">    Point point;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!dataFile.eof()) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">if</span> (count % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            dataFile &gt;&gt; point.x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            dataFile &gt;&gt; point.y;</span><br><span class="line">            Set.push_back(point);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//print data</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::size_type i = <span class="number">0</span>; i &lt; Set.size(); i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; Set[i].x &lt;&lt; <span class="string">","</span> &lt;&lt; Set[i].y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"   "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> K = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"group number:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; K;</span><br><span class="line">    K_Means(Set, K);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">K_Means.h</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>/</span><br><span class="line"><span class="comment">#ifndef K_MEANS_K_MEANS_H</span></span><br><span class="line"><span class="comment">#define K_MEANS_K_MEANS_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#include &lt;vector&gt;</span></span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct Point &#123;</span><br><span class="line">    double x;</span><br><span class="line">    double y;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//获取两点的距离</span><br><span class="line">double getDistance(Point A, Point B);</span><br><span class="line"></span><br><span class="line">//计算某点属于哪个聚类中心</span><br><span class="line">int getSetNum(Point means[], Point point);</span><br><span class="line"></span><br><span class="line">//计算某聚类组的中心（均值）</span><br><span class="line">Point getMeans(vector<span class="variable">&lt;Point&gt;</span> Set);</span><br><span class="line"></span><br><span class="line">//K均值算法实现</span><br><span class="line">void K_Means(vector<span class="variable">&lt;Point&gt;</span> Set, int K);</span><br><span class="line"></span><br><span class="line">//计算新中心点与旧中心点之间的误差</span><br><span class="line">double getPointError(vector<span class="variable">&lt; vector&lt;Point&gt;</span> &gt; clusters, vector<span class="variable">&lt;Point&gt;</span> means);</span><br><span class="line"></span><br><span class="line"><span class="comment">#endif //K_MEANS_K_MEANS_H</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*****************</span><br><span class="line">K_Means.cpp</span><br><span class="line">*****************/</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">"K_Means.h"</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">getDistance</span><span class="params">(Point A, Point B)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> distance = <span class="number">0.0</span>;</span><br><span class="line">    distance = <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(A.x - B.x, <span class="number">2</span>) + <span class="built_in">pow</span>(A.y - B.y, <span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span> distance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getSetNum</span><span class="params">(<span class="built_in">vector</span>&lt;Point&gt; means, Point point)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> dis = getDistance(means[<span class="number">0</span>], point);</span><br><span class="line">    <span class="keyword">double</span> temp = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">int</span> setNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; means.size(); i++) &#123;</span><br><span class="line">        temp = getDistance(means[i], point);</span><br><span class="line">        <span class="keyword">if</span> (temp &lt; dis) &#123;</span><br><span class="line">            dis = temp;</span><br><span class="line">            setNum = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> setNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Point <span class="title">getMeans</span><span class="params">(<span class="built_in">vector</span>&lt;Point&gt; Set)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = Set.size();</span><br><span class="line">    <span class="keyword">double</span> XMeans = <span class="number">0.0</span>, YMeans = <span class="number">0.0</span>;</span><br><span class="line">    Point point;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        XMeans = XMeans + Set[i].x;</span><br><span class="line">        YMeans = YMeans + Set[i].y;</span><br><span class="line">    &#125;</span><br><span class="line">    XMeans = XMeans / num;</span><br><span class="line">    YMeans = YMeans / num;</span><br><span class="line">    point.x = XMeans;</span><br><span class="line">    point.y = YMeans;</span><br><span class="line">    <span class="keyword">return</span> point;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">getPointError</span><span class="params">(<span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;Point&gt; &gt; clusters, <span class="built_in">vector</span>&lt;Point&gt; means)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> pointError = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;Point&gt; &gt;::iterator iter = clusters.begin(); iter != clusters.end(); iter++) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">vector</span>&lt;Point&gt; t = *iter;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator pointIter = t.begin(); pointIter != t.end(); pointIter++) &#123;</span><br><span class="line">            pointError = pointError + getDistance(*pointIter, means[count]);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pointError;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">K_Means</span><span class="params">(<span class="built_in">vector</span>&lt;Point&gt; Set, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;Point&gt; &gt; clusters(K);</span><br><span class="line">    <span class="built_in">vector</span>&lt;Point&gt; means;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">        means.push_back(Set[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//for (int i = 0; i &lt; K; i++)</span></span><br><span class="line">    <span class="comment">//&#123;</span></span><br><span class="line">    <span class="comment">//  clusters.push_back(means);</span></span><br><span class="line">    <span class="comment">//  vector&lt; vector&lt;Point&gt; &gt;::iterator clusIter = clusters.begin();</span></span><br><span class="line">    <span class="comment">//  (*clusIter).clear();</span></span><br><span class="line">    <span class="comment">//  clusIter++;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="keyword">int</span> setNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = Set.begin(); iter != Set.end(); iter++) &#123;</span><br><span class="line">        setNum = getSetNum(means, *iter);</span><br><span class="line">        clusters[setNum].push_back(*iter);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"initial value:"</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"group"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">": "</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;Point&gt; t = clusters[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = t.begin(); iter != t.end(); iter++) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; iter-&gt;x &lt;&lt; <span class="string">","</span> &lt;&lt; iter-&gt;y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"   "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"center point: "</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = means.begin(); iter != means.end(); iter++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; iter-&gt;x &lt;&lt; <span class="string">","</span> &lt;&lt; iter-&gt;y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"   "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> lastPointError = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">double</span> pointError = getPointError(clusters, means);</span><br><span class="line">    <span class="keyword">int</span> iterationTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">abs</span>(pointError - lastPointError) &gt;= <span class="number">0.1</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">            means[i] = getMeans(clusters[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        lastPointError = pointError;</span><br><span class="line">        pointError = getPointError(clusters, means);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">            clusters[i].clear();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = Set.begin(); iter != Set.end(); iter++) &#123;</span><br><span class="line">            setNum = getSetNum(means, *iter);</span><br><span class="line">            clusters[setNum].push_back(*iter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*  for (int i = 0; i != Set.size(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                setNum = getSetNum(means, Set[i]);</span><br><span class="line">                clusters[setNum].push_back(Set[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        */</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"iteration "</span> &lt;&lt; iterationTime + <span class="number">1</span> &lt;&lt; <span class="string">":"</span> &lt;&lt; endl;</span><br><span class="line">        iterationTime++;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"group"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">": "</span>;</span><br><span class="line">            <span class="built_in">vector</span>&lt;Point&gt; t = clusters[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = t.begin(); iter != t.end(); iter++) &#123;</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; iter-&gt;x &lt;&lt; <span class="string">","</span> &lt;&lt; iter-&gt;y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"   "</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"center point: "</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Point&gt;::iterator iter = means.begin(); iter != means.end(); iter++)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; iter-&gt;x &lt;&lt; <span class="string">","</span> &lt;&lt; iter-&gt;y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="string">"   "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">CMakeLists.txt</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>/</span><br><span class="line">cmake_minimum_required(VERSION 3.3)</span><br><span class="line">project(K_Means)</span><br><span class="line"></span><br><span class="line">set(CMAKE_CXX_FLAGS <span class="string">"$&#123;CMAKE_CXX_FLAGS&#125; -std=c++11"</span>)</span><br><span class="line"></span><br><span class="line">set(SOURCE_FILES main.cpp K_Means.cpp K_Means.h)</span><br><span class="line">add_executable(K_Means $&#123;SOURCE_FILES&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="总结">总结</h2><p>K均值算法有如下缺点：</p>
<ol>
<li>需要事先指定K值，该值对后续结果的影响很大</li>
<li>局部最优解不一定是全局最优。因为聚类效果受初始中心点影响很大，如果把前K个点作为初始中心点，那么聚类效果对数据的顺序是敏感的，即数据的顺序不同，导致前K个点的不同，从而影响聚类效果</li>
<li>对离群点敏感，若该聚类组中有一点与别的点偏差很大，容易导致该聚类组的聚类中心偏移</li>
<li>无法进行增量计算<br>总的来说，K均值法的缺点都是围绕初始值而产生的，所以选取合适的初始值（K值和初始中心点）是至关重要的。</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/avatar.jpg" alt="Mango" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Mango</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
              <a href="http://bbs.uestc.edu.cn/" target="_blank">清水河畔</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mango</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'mango1220';
      var disqus_identifier = 'index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
